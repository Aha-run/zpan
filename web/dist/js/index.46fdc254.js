(function(e){function t(t){for(var a,r,i=t[0],l=t[1],c=t[2],u=0,d=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);p&&p(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==s[i]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={index:0},s={index:0},o=[];function i(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-01979aab":"2db06023","chunk-07c1386c":"d61e0b00","chunk-084db930":"8a40fa78","chunk-1151e633":"d2630c04","chunk-141f1d87":"3b3a4813","chunk-22dece4e":"f8e7b635","chunk-22fc65ee":"9ef9a7e5","chunk-28baf1b3":"8ccee5db","chunk-2d0a4fde":"7b54a6d4","chunk-2d0afa39":"f8c8f44c","chunk-2d0bce73":"864ce022","chunk-2d0c5700":"c51e9056","chunk-2d0d76a6":"5d34e0c0","chunk-2d0daeb3":"6c3f8a49","chunk-2d207759":"1f3df9f4","chunk-371ca9cd":"b1dd7535","chunk-3918a232":"56f00c2e","chunk-48e85850":"5e7f28bb","chunk-4fae512a":"2b883224","chunk-5db82f0c":"62809c5b","chunk-63054002":"b9ae9928","chunk-753faf1e":"14a2e30f","chunk-7f449b70":"d74a7273","chunk-875b66d8":"e3a2a006","chunk-c39e5b9a":"38687fca"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-01979aab":1,"chunk-07c1386c":1,"chunk-084db930":1,"chunk-1151e633":1,"chunk-141f1d87":1,"chunk-22dece4e":1,"chunk-22fc65ee":1,"chunk-28baf1b3":1,"chunk-371ca9cd":1,"chunk-3918a232":1,"chunk-48e85850":1,"chunk-4fae512a":1,"chunk-5db82f0c":1,"chunk-63054002":1,"chunk-753faf1e":1,"chunk-7f449b70":1,"chunk-875b66d8":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-01979aab":"0568edce","chunk-07c1386c":"09f4af54","chunk-084db930":"c4f9a7a6","chunk-1151e633":"9856c3c5","chunk-141f1d87":"09f4af54","chunk-22dece4e":"1d3af35b","chunk-22fc65ee":"94e0f332","chunk-28baf1b3":"aa85f72a","chunk-2d0a4fde":"31d6cfe0","chunk-2d0afa39":"31d6cfe0","chunk-2d0bce73":"31d6cfe0","chunk-2d0c5700":"31d6cfe0","chunk-2d0d76a6":"31d6cfe0","chunk-2d0daeb3":"31d6cfe0","chunk-2d207759":"31d6cfe0","chunk-371ca9cd":"6a417862","chunk-3918a232":"439841c9","chunk-48e85850":"95c79dda","chunk-4fae512a":"09f4af54","chunk-5db82f0c":"1d3af35b","chunk-63054002":"cb90d1b6","chunk-753faf1e":"a0ccf9af","chunk-7f449b70":"0c7d8b3b","chunk-875b66d8":"c4257cb3","chunk-c39e5b9a":"31d6cfe0"}[e]+".css",s=l.p+a,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var c=o[i],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===a||u===s))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){c=d[i],u=c.getAttribute("data-href");if(u===a||u===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||s,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[e],p.parentNode.removeChild(p),n(o)},p.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){r[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=o);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=i(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(p);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}s[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("64a9")},1914:function(e,t){e.exports=PhotoSwipe},"2dfc":function(e,t){},"338e":function(e,t,n){},"41cb":function(e,t,n){"use strict";var a=n("8bbf"),r=n.n(a),s=n("6389"),o=n.n(s),i=n("9225");n("c0d6");r.a.use(o.a);let l=new o.a({mode:"history",routes:[{path:"/",name:"home",component:()=>n.e("chunk-1151e633").then(n.bind(null,"7abe"))},{path:"/install",name:"installer",component:()=>n.e("chunk-084db930").then(n.bind(null,"a25c"))},{path:"/:sname",component:()=>n.e("chunk-1151e633").then(n.bind(null,"7abe")),children:[{path:"/",name:"disk",component:()=>n.e("chunk-63054002").then(n.bind(null,"db7e"))},{path:"pic",name:"pic",component:()=>n.e("chunk-c39e5b9a").then(n.bind(null,"8a3a"))},{path:"share",name:"share",component:()=>n.e("chunk-3918a232").then(n.bind(null,"e238"))},{path:"recyclebin",name:"recyclebin",component:()=>n.e("chunk-875b66d8").then(n.bind(null,"4438"))}]},{path:"/s/:alias",name:"share-info",component:()=>n.e("chunk-28baf1b3").then(n.bind(null,"ce0d"))},{path:"/s/:alias/draw",name:"share-draw",component:()=>n.e("chunk-753faf1e").then(n.bind(null,"bc5a"))},{path:"/settings",component:()=>n.e("chunk-22fc65ee").then(n.bind(null,"61c2")),children:[{path:"profile",name:"profile",component:()=>n.e("chunk-4fae512a").then(n.bind(null,"31bb"))},{path:"security",name:"security",component:()=>n.e("chunk-141f1d87").then(n.bind(null,"2fff"))},{path:"developer",name:"developer",component:()=>n.e("chunk-07c1386c").then(n.bind(null,"acca"))}]},{path:"/admin",component:()=>n.e("chunk-01979aab").then(n.bind(null,"2953")),children:[{path:"dashboard",name:"admin",component:()=>n.e("chunk-2d0a4fde").then(n.bind(null,"0998"))},{path:"users",name:"users",component:()=>n.e("chunk-48e85850").then(n.bind(null,"4da1"))},{path:"storages",name:"storages",component:()=>n.e("chunk-371ca9cd").then(n.bind(null,"6a72"))},{path:"settings",name:"settings",component:()=>n.e("chunk-5db82f0c").then(n.bind(null,"c6e4"))},{path:"settings/email",name:"settings-email",component:()=>n.e("chunk-22dece4e").then(n.bind(null,"0a01"))}]},{path:"/u",component:()=>n.e("chunk-7f449b70").then(n.bind(null,"9ed6")),children:[{path:"signin",name:"signin",meta:{title:"用户登录"},component:()=>n.e("chunk-2d0daeb3").then(n.bind(null,"6e3a"))},{path:"signout",name:"signout",meta:{title:"用户登出"},component:()=>n.e("chunk-2d0d76a6").then(n.bind(null,"775e"))},{path:"signin/:token64",name:"activate",meta:{title:"账户激活"},component:()=>n.e("chunk-2d0afa39").then(n.bind(null,"0ed2"))},{path:"signup",name:"signup",meta:{title:"用户注册"},component:()=>n.e("chunk-2d0bce73").then(n.bind(null,"2a5c"))},{path:"password-reset",name:"reset_apply",meta:{title:"密码找回"},component:()=>n.e("chunk-2d0c5700").then(n.bind(null,"3ea9"))},{path:"password-reset/:token64",name:"reset_confirm",meta:{title:"密码找回"},component:()=>n.e("chunk-2d207759").then(n.bind(null,"a12e"))}]}]});const c=(e,t)=>{r.a.zpan.System.optGet("core.site").then(t=>{let n=t.data,a=n.name;e&&(a+="- "+e),window.document.title=a,i["a"].locale=n.locale}).catch(e=>{e.response&&520==e.response.status&&t({name:"installer"})})};l.beforeEach((e,t,n)=>{c(i["a"].t("title."+e.name),n),n()}),l.afterEach(()=>{window.scrollTo(0,0)}),t["a"]=l},"423e":function(e){e.exports=JSON.parse('{"click-copy-link":"点击复制链接","copy-link":"复制链接","create-folder":"新建文件夹","day":"天","op":{"close":"关闭","confirm":"确认","init":"初始化","reset":"重置","cancel":"取消","enable":"启用","disable":"禁用","rename":"重命名","delete":"删除","batch-delete":"批量删除"},"msg":{"success":"成功","failed":"失败","batch-delete-success":"批量删除成功","create-success":"创建成功","delete-success":"删除成功","move-success":"移动成功","copy-success":"复制成功","copy-failed":"复制失败","rename-success":"重命名成功","save-success":"保存成功","clean-success":"清理成功","recovery-success":"恢复成功","cancel-success":"取消成功"},"dialog":{"moveto-title":"移动到","outlink-title":"下载外链","share-drawcode":"提取码","share-drawcode-switch":"使用提取码保护链接","share-expire-time":"有效期","share-link":"链接地址","share-title":"分享链接","upload-click":"点击上传","upload-tips":"将文件拖到此处，或","upload-title":"上传队列"},"disk":{"delete":"删除","download":"下载","folder":"新建","upload":"上传"},"ft":{"breadcrumb":"全部文件"},"ftb":{"move":"移动到","remove":"删除","rename":"重命名"},"fth":{"name":"名称","size":"大小","updated":"最近更新"},"leftnav":{"audio":"音频","doc":"文档","files":"全部文件","image":"图片","share":"我的分享","recyclebin":"回收站","storage":"存储空间","video":"视频"},"share":{"auto-download-tips":"您的文件已经开始下载，如果没有开始请点击此处重试","created":"分享时间","drawcode":"提取码","drawcode-placeholder":"请输入提取码","drawfile":"提取文件","expired":"失效时间","link":"链接","name":"名称","cancel":"取消分享"},"recyclebin":{"recovery":"确认恢复？","delete":"彻底删除？","clean":"清空回收站"},"tips":{"batch-delete":"此操作将永久删除所选文件，是否继续？","create-folder":"请输入新的文件夹名称","remove":"此操作将文件移动到回收站, 是否继续?","rename":"请输入新的名称","recyclebin":"提示：回收站也占用网盘空间，请及时清理哦~","share-cancel":"取消分享后，该条分享记录将被删除，好友将无法再访问此分享链接。 您确认要取消分享吗？","recovery":"确认还原选中的文件？","delete":"此操作将彻底删除该文件, 是否继续?","clean":"确认清空回收站？","deleting":"正在删除...","disable":"禁用后将不可用，是否继续？","enable":"确认启用？","secret-reset":"重置后，老的秘钥将无法使用，是否继续？","secret-init":"您尚未开通开发者权限，是否开通？"},"topbar":{"netdisk":"网盘","imghosting":"图床","search":"搜索...","profile":"个人主页","settings":"个人设置","s-platform":"管理后台","signout":"退出"},"title":{"disk":"我的文件","share":"我的分享","recyclebin":"回收站","picture":"我的图床","storage-quota":"存储配额","admin":"管理后台","storages":"存储管理","users":"用户管理","settings":"站点设置","settings-email":"发信邮箱"},"year":"年","admin":{"search-placeholder":"请输入要查找的用户邮箱...","storage-search-placeholder":"请输入要查找的存储空间...","btn-user-add":"添加新用户","btn-quota-update":"调整配额","btn-storage-add":"创建存储","btn-edit":"编辑","label-nickname":"用户昵称","label-email":"Email","label-role":"角色","label-status":"状态","label-storage":"配额","label-operation":"操作","label-quota":"存储配额","label-quota-change":"配额调整","label-password-reset":"密码重置","label-storage-manager":"存储管理","label-name":"名称","label-title":"标题","label-intro":"描述","label-bucket":"存储桶","label-endpoint":"接入点","label-region":"区域名称","label-custom_host":"自有域名","label-access_key":"AccessKey","label-secret_key":"SecretKey"},"cloudplatform":{"COS":"腾讯云","KODO":"七牛云","MINIO":"自建云","NOS":"网易云","OBS":"华为云","OSS":"阿里云","S3":"亚马逊","US3":"UColud","USS":"又拍云"}}')},"49f8":function(e,t,n){var a={"./en.json":"edd4","./zh-CN.json":"423e"};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id="49f8"},"54c7":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("8bbf"),r=n.n(a),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view",{attrs:{id:"app"}})},o=[],i={data(){return{}},watch:{},computed:{},methods:{},mounted(){this.$clipboard.on("success",e=>{this.$message.success(this.$t("msg.copy-success")),e.clearSelection()}),this.$clipboard.on("error",e=>{this.$message.error(this.$t("msg.copy-failed"))})},beforeDestroy(){this.$clipboard.destroy()}},l=i,c=(n("034f"),n("2877")),u=Object(c["a"])(l,s,o,!1,null,null,null),d=u.exports,p=n("9225"),h=n("c0d6"),m=n("41cb"),f=n("bc3a"),b=n.n(f),g=n("5f72"),w=n.n(g);let v={};const y=b.a.create(v);y.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),y.interceptors.response.use((function(e){return e.data}),(function(e){if(b.a.isCancel(e))return Promise.reject(e.message?e.message:"Request canceled");if(e.response&&401==e.response.status)return window.location="/moreu/signin",Promise.reject("invalid login status");let t=e.message;return e.response&&e.response.data.msg&&(t=e.response.data.msg),g["Notification"].error(t),Promise.reject(e)})),Plugin.install=function(e,t){e.axios=y,window.axios=y,Object.defineProperties(e.prototype,{axios:{get(){return y}},$axios:{get(){return y}}})},r.a.use(Plugin);Plugin;var k=n("c32d"),_=n.n(k);r.a.prototype.$moment=_.a,r.a.filter("moment",(function(e,t){return t=t||"YYYY-MM-DD HH:mm:ss",_()(e).format(t)})),String.prototype.moment||(String.prototype.moment=function(e){return e=e||"YYYY-MM-DD HH:mm:ss",_()(this).format(e)});n("0fae");r.a.use(w.a);var S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{staticClass:"header"},[n("el-breadcrumb",{staticClass:"bread",attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.breadcrumb,(function(t){return n("el-breadcrumb-item",{key:t.dir,attrs:{index:t.dir,to:e.buildQuery(t.dir)}},[e._v(e._s(t.name))])})),1),n("span",{staticClass:"loadtips",staticStyle:{float:"right"}},[e._v(e._s(e.loadedtips))])],1),"grid"==e.layout?n("GridExplorer",{attrs:{loading:e.loading,moreButtons:e.moreButtons},on:{"on-click":e.onClick},model:{value:e.rows,callback:function(t){e.rows=t},expression:"rows"}}):n("ListExplorer",{attrs:{loading:e.loading,rowButtons:e.rowButtons,moreButtons:e.moreButtons},on:{"on-click":e.onClick,"scroll-end":e.onScrollEnd,"selection-change":e.onSelectionChange},model:{value:e.rows,callback:function(t){e.rows=t},expression:"rows"}}),n("MediaViewer",{attrs:{visible:e.mediavv},on:{close:function(t){e.mediavv=!1}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),n("PictureViewer",{ref:"photoView"})],1)},C=[],x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"explorer"},e._l(e.data,(function(t){return n("div",{key:t.alias,staticClass:"explorer-item",on:{click:function(n){return e.onNameClick(t)}}},[t.dirtype?n("i",{staticClass:"matter-icon el-icon-folder",staticStyle:{color:"#ffc402"}}):n("i",{class:"iconfont "+e.type2icon(t.type)}),n("p",[e._v(e._s(t.name))])])})),0)},$=[];const P={props:{value:Array,loading:!1,rowButtons:Array,moreButtons:Array},data(){return{data:[]}},watch:{value(e,t){this.data=e}},methods:{isOfficeFile(e){let t=["application/msword","application/vnd.ms-excel","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation"];return t.includes(e)},officeIcon(e){let t=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],n=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],a=["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"];return t.includes(e)?"icon-doc":n.includes(e)?"icon-excel":a.includes(e)?"icon-ppt":void 0},type2icon(e){console.log(e);let[t,n]=e.split("/"),a=["pdf","html","xml","psd","rtf"];if(a.includes(n))return"icon-"+n;let r=["json","yaml","x-yaml"];if(r.includes(n))return"icon-html";let s=["zip","x-gzip"];if(s.includes(n))return"icon-compressed-file";if(this.isOfficeFile(e))return this.officeIcon(e);let o=["audio","video","image","text"];return o.includes(t)?"icon-"+t:"icon-file"},onNameClick(e){e.dirtype?this.$emit("on-click","folder",e):e.type.startsWith("image")?this.$emit("on-click","image",e):e.type.startsWith("audio")||e.type.startsWith("video")?this.$emit("on-click","media",e):this.isOfficeFile(e.type)&&this.$emit("on-click","doc",e)}}};var E=P,B={mixins:[E],data(){return{}},methods:{onSelectionChange(e){this.$emit("selection-change",e)},onSelectable(e,t){if(!e.dirtype)return!0},handleCommand(e){e.action(e.row)},onScrollEnd(){this.$emit("scroll-end")}}},O=B,D=(n("ac82"),Object(c["a"])(O,x,$,!1,null,"27e97df8",null)),N=D.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"el-table-infinite-scroll",rawName:"v-el-table-infinite-scroll",value:e.onScrollEnd,expression:"onScrollEnd"}],staticStyle:{width:"100%"},attrs:{height:"calc(100% - 55px)","tooltip-effect":"dark",size:"small",data:e.data,"highlight-current-row":""},on:{"selection-change":e.onSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"30",selectable:e.onSelectable}}),n("el-table-column",{attrs:{prop:"name",label:e.$t("fth.name"),"min-width":"200","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.dirtype?n("i",{staticClass:"matter-icon el-icon-folder",staticStyle:{color:"#ffc402"}}):n("i",{class:"iconfont matter-icon "+e.type2icon(t.row.type)}),n("el-link",{staticClass:"matter-title",attrs:{underline:!1,href:"Javascript: void(0);"}},[n("span",{on:{click:function(n){return e.onNameClick(t.row)}}},[e._v(e._s(t.row.name))])])]}}])}),n("el-table-column",{attrs:{width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"operation",staticStyle:{float:"right","vertical-align":"super"}},[e._l(e.rowButtons,(function(e){return n("el-link",{directives:[{name:"show",rawName:"v-show",value:!e.shown||e.shown(t.row),expression:"!item.shown || item.shown(scope.row)"}],key:e.name,attrs:{type:"primary",underline:!1}},[n("i",{class:e.icon+" el-icon--right",on:{click:function(n){return e.action(t.row)}}})])})),n("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:e.moreButtons&&e.moreButtons.length>0,expression:"moreButtons && moreButtons.length > 0"}],attrs:{trigger:"click"},on:{command:e.handleCommand}},[n("el-link",{staticClass:"el-dropdown-link",attrs:{type:"primary",underline:!1}},[n("i",{staticClass:"el-icon-more el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.moreButtons,(function(a){return n("el-dropdown-item",{key:a.name,attrs:{command:{action:a.action,row:t.row}}},[e._v("\n              "+e._s(a.title)+"\n            ")])})),1)],1)],2)]}}])}),n("el-table-column",{attrs:{prop:"size",label:e.$t("fth.size"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.dirtype?n("div",[e._v("-")]):n("div",[e._v(e._s(t.row.size))])]}}])}),n("el-table-column",{attrs:{prop:"updated",label:e.$t("fth.updated"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("moment")(t.row.updated)))]}}])})],1)},M=[],A=n("521e"),L={mixins:[E],directives:{"el-table-infinite-scroll":A["a"]},data(){return{}},methods:{onSelectionChange(e){this.$emit("selection-change",e)},onSelectable(e,t){if(!e.dirtype)return!0},handleCommand(e){e.action(e.row)},onScrollEnd(){this.$emit("scroll-end")}}},T=L,U=(n("a604"),Object(c["a"])(T,j,M,!1,null,"0e9f5599",null)),R=U.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.value.name,visible:e.show,width:"30%"},on:{"update:visible":function(t){e.show=t},opened:e.onOpen,close:e.onClose}},[n("vue-plyr",{directives:[{name:"show",rawName:"v-show",value:"audio"==e.mediatype,expression:"mediatype == 'audio'"}],ref:"audio"},[n("audio",{attrs:{src:e.value.url}})]),n("vue-plyr",{directives:[{name:"show",rawName:"v-show",value:"video"==e.mediatype,expression:"mediatype == 'video'"}],ref:"video"},[n("video",{attrs:{src:e.value.url}})])],1)},F=[],q={props:{value:Object,visible:{type:Boolean,default:!1}},data(){return{show:!1}},watch:{visible(e,t){this.show=e}},methods:{onOpen(){this.player.play()},onClose(){this.$emit("close"),console.log(this.player),this.player.stop()}},computed:{filetype(){return this.value.type?this.value.type:""},mediatype(){return this.filetype.split("/")[0]},player(){return this.$refs[this.mediatype].player}}},I=q,V=Object(c["a"])(I,z,F,!1,null,null,null),Y=V.exports,K=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Q=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pswp",attrs:{tabindex:"0",role:"dialog","aria-hidden":"true"}},[n("div",{staticClass:"pswp__bg"}),n("div",{staticClass:"pswp__scroll-wrap"},[n("div",{staticClass:"pswp__container"},[n("div",{staticClass:"pswp__item"}),n("div",{staticClass:"pswp__item"}),n("div",{staticClass:"pswp__item"})]),n("div",{staticClass:"pswp__ui pswp__ui--hidden"},[n("div",{staticClass:"pswp__top-bar"},[n("div",{staticClass:"pswp__counter"}),n("button",{staticClass:"pswp__button pswp__button--close",attrs:{title:"Close (Esc)"}}),n("button",{staticClass:"pswp__button pswp__button--share",attrs:{title:"Share"}}),n("button",{staticClass:"pswp__button pswp__button--fs",attrs:{title:"Toggle fullscreen"}}),n("button",{staticClass:"pswp__button pswp__button--zoom",attrs:{title:"Zoom in/out"}}),n("div",{staticClass:"pswp__preloader"},[n("div",{staticClass:"pswp__preloader__icn"},[n("div",{staticClass:"pswp__preloader__cut"},[n("div",{staticClass:"pswp__preloader__donut"})])])])]),n("div",{staticClass:"pswp__share-modal pswp__share-modal--hidden pswp__single-tap"},[n("div",{staticClass:"pswp__share-tooltip"})]),n("button",{staticClass:"pswp__button pswp__button--arrow--left",attrs:{title:"Previous (arrow left)"}}),n("button",{staticClass:"pswp__button pswp__button--arrow--right",attrs:{title:"Next (arrow right)"}}),n("div",{staticClass:"pswp__caption"},[n("div",{staticClass:"pswp__caption__center"})])])])])}],H=n("1914"),G=n.n(H),W=n("14fd"),J=n.n(W),Z=(n("343a"),n("3fb5"),{name:"PhotoPreview",methods:{open(e){var t=[{src:e,w:600,h:400}],n={index:0},a=document.querySelectorAll(".pswp")[0],r=new G.a(a,J.a,t,n);r.init()}}}),X=Z,ee=Object(c["a"])(X,K,Q,!1,null,"9c4266e8",null),te=ee.exports,ne={components:{GridExplorer:N,ListExplorer:R,MediaViewer:Y,PictureViewer:te},props:{layout:{type:String,default:"list"},dataLoader:Function,linkLoader:Function,rowButtons:Array,moreButtons:Array,rootDir:{type:String,default:""}},data(){return{currentDir:"",loading:!1,offset:0,limit:100,rows:[],total:0,selection:Array,selected:{},mediavv:!1}},watch:{$route:"onRouteChange",layout(e,t){e!=t&&this.listRefresh()}},computed:{breadcrumb(){let e=[{name:this.$t("ft.breadcrumb"),dir:""}];if(!this.currentDir)return e;let t="";return this.currentDir.split("/").forEach(n=>{""!=n&&(e.push({name:n,dir:t+n+"/"}),t+=n+"/")}),e},loadedtips(){let e=this.rows.length;return e==this.total?`已全部加载，共${this.total}个`:`已加载${e}个，共${this.total}个`}},methods:{onRouteChange(e,t){this.currentDir!=e.query.dir&&(this.currentDir=e.query.dir),this.listRefresh()},onSelectionChange(e){this.$emit("selection-change",e)},onScrollEnd(){0==this.total||this.rows.length!=this.total?this.listRefresh(this.offset,this.limit):console.log("no more")},listRefresh(e,t){e||(e=0),t||(t=this.limit),this.loading=!0;let n=this.currentDir?this.currentDir:"";this.dataLoader(n,e,t).then(n=>{0==e?(this.rows=n.list,this.offset=t):(this.rows=this.rows.concat(n.list),this.offset+=this.limit),this.total=n.total,this.loading=!1})},buildQuery(e){e.startsWith(this.rootDir)&&(e=e.replace(this.rootDir,""));let t=e?{dir:e}:{};return{query:t}},onClick(e,t){"folder"!=e?this.linkLoader(t).then(n=>{switch(e){case"media":this.selected=t,this.selected.url=n,this.mediavv=!0;break;case"image":this.$refs.photoView.open(n);break;case"doc":window.open("http://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(n));break}}):this.$router.push(this.buildQuery(t.fullpath))}},mounted(){this.currentDir=this.$route.query.dir?this.$route.query.dir:""}},ae=ne,re=(n("a22d"),Object(c["a"])(ae,S,C,!1,null,"68e25eea",null)),se=re.exports;const oe={FileExplorer:se},ie=function(e,t){Object.keys(oe).forEach(t=>{e.component(t,oe[t])})};var le=ie;r.a.use(le);var ce=n("b311"),ue=n.n(ce);r.a.prototype.$clipboard=new ue.a(".copy-link");n("2dfc");var de=n("afa7");r.a.use(de["a"],{plyr:{},emit:["ended"]});let pe={baseURL:"/api"};const he=b.a.create(pe);he.interceptors.response.use((function(e){return e.data}),(function(e){if(e.response&&401==e.response.status)return window.location="/u/signin",Promise.reject("invalid login status");if(e.response&&520==e.response.status)return Promise.reject(e);let t=e.message;return e.response&&e.response.data.msg&&(t=e.response.data.msg),g["Notification"].error(t),Promise.reject(e)}));var me=he;class fe{installDatabase(e){return me.put("/system/database",e)}createAdministrator(e){return me.put("/system/account",e)}optGet(e){return me.get("/system/options/"+e)}optSave(e,t){return me.put("/system/options/"+e,t)}matterPathEnvs(){return me.get("/system/matter-path-envs")}providers(){return me.get("/system/providers")}}var be=fe;class ge{signup(e){return me.post("/users",e)}activate(e,t){let n={token:t,activated:!0};return me.patch("/users/"+e,n)}applyPasswordReset(e){let t={email:e};return me.post("/tokens",t)}passwordReset(e,t,n){let a={token:t,password:n};return me.patch("/users/"+e,a)}signin(e){return me.post("/tokens",e)}signout(){return me.delete("/tokens")}profileGet(){return me.get("/user")}updateProfile(e){return me.put("/user/profile",e)}updatePassword(e){return me.put("/user/password",e)}list(e){return me.get("/users",{params:e})}find(e){return me.get("/users/"+e)}delete(e){return me.delete("/users/"+e)}updatePasswordByUser(e,t){return me.put(`/users/${e}/password`,t)}updateStorageByUser(e,t){return me.put(`/users/${e}/storage`,t)}updateStatusByUser(e,t){return me.put(`/users/${e}/status`,t)}}var we=ge;class ve{create(e){return me.post("/user/keys",{name:e})}list(e){return me.get("/user/keys",{params:e})}find(e){return me.get("/user/keys/"+e)}delete(e){return me.delete("/user/keys/"+e)}resetSecret(e,t){return me.patch(`/user/keys/${e}/secret`,t)}}var ye=ve;class ke{list(e){return me.get("/storages",{params:e})}find(e){return me.get("/storages/"+e)}create(e){return me.post("/storages",e)}update(e){return me.put("/storages/"+e.id,e)}delete(e){return me.delete("/storages/"+e)}}var _e=ke,Se=n("90fe");class Ce{upload(e,t,n,a){let r=t.file,s={sid:e,name:t.filename,type:r.type,size:r.size,dir:n};return new Promise((e,n)=>{this.create(s).then(r=>{let s=r.data;Se["a"].upload(t,s.link,s.headers,a).then(()=>{me.patch(`/matters/${s.alias}/done`).then(t=>{e(t)})}).catch(n)}).catch(n)})}findLink(e){return new Promise((t,n)=>{me.get(`/matters/${e}/link`).then(e=>{t(e.data)}).catch(n)})}download(e){return new Promise((t,n)=>{this.findLink(e).then(e=>{Se["a"].download(e.name,e.link).then(()=>{t(e)}).catch(n)})})}create(e){return me.post("/matters",e)}list(e){return new Promise((t,n)=>{me.get("/matters",{params:e}).then(e=>{let n=e.data;n.list=n.list.map(e=>(e.size=Se["a"].formatBytes(e.size,1),e.fullpath=`${e.parent}${e.name}`,e.dirtype&&(e.fullpath+="/"),e)),t(n)}).catch(n)})}rename(e,t){return me.patch(`/matters/${e}/name`,{name:t})}move(e,t){return me.patch(`/matters/${e}/location`,{dir:t})}copy(e,t){return me.patch(`/matters/${e}/duplicate`,{path:t})}delete(e){return me.delete("/matters/"+e)}}var xe=Ce;class $e{list(e){return me.get("/shares",{params:e})}find(e){return me.get("/shares/"+e)}create(e){return me.post("/shares",e)}remove(e){return me.delete("/shares/"+e)}draw(e,t){return me.post(`/shares/${e}/token`,{secret:t})}findMatter(e){return me.get(`/shares/${e}/matter`)}listMatters(e,t){return me.get(`/shares/${e}/matters`,{params:t})}}var Pe=$e;class Ee{list(e){return new Promise((t,n)=>{me.get("/recycles",{params:e}).then(e=>{let n=e.data;t(n)}).catch(n)})}recovery(e){return me.put("/recycles/"+e)}delete(e){return me.delete("/recycles/"+e)}clean(e){return me.delete("/recycles",{params:{sid:e}})}}var Be=Ee;const Oe=new be,De=new we,Ne=new ye,je=new _e,Me=new xe,Ae=new Pe,Le=new Be;var Te={System:Oe,User:De,UserKey:Ne,Storage:je,File:Me,Share:Ae,Recyclebin:Le};const Ue={install:function(e,t){e.zpan=Te,window.zpan=Te,Object.defineProperties(e.prototype,{zpan:{get(){return Te}},$zpan:{get(){return Te}}})}};r.a.use(Ue);r.a.config.productionTip=!1,new r.a({i18n:p["a"],router:m["a"],store:h["a"],render:e=>e(d)}).$mount("#app")},5880:function(e,t){e.exports=Vuex},"5f72":function(e,t){e.exports=ELEMENT},6389:function(e,t){e.exports=VueRouter},"64a9":function(e,t,n){},"8bbf":function(e,t){e.exports=Vue},"90fe":function(e,t,n){"use strict";var a=n("bc3a"),r=n.n(a);let s={upload(e,t,n,a){let s=e.file;return new Promise((o,i)=>{const l=r.a.CancelToken;let c={headers:n,cancelToken:new l(a),onUploadProgress:function(t){s.percent=t.loaded/t.total*100,e.onProgress&&e.onProgress(s)}};window.axios.put(t,s,c).then(t=>{e.onSuccess&&e.onSuccess(),o(t)}).catch(i)})},download(e,t){return new Promise((n,a)=>{var r=document.createElement("a");r.href=t,r.download=e,r.click(),n()})},formatBytes(e,t){if(0==e)return"0 Bytes";var n=1024,a=t+1||3,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,s)).toFixed(a))+" "+r[s]},setupPasteUpload(e){document.addEventListener("paste",t=>{let n=null;if((t.clipboardData||t.originalEvent)&&(n=t.clipboardData||t.originalEvent.clipboardData),n&&n.items){t.preventDefault();let a=n.items[0];if(!a.type.startsWith("image"))return;let r=a.getAsFile(),s=r.name.replace("image",(new Date).getTime());e({file:r,filename:s})}})},bytesUnits(){const e=1024,t=1024*e,n=1024*t,a=1024*n,r=1024*a,s=[{label:"KB",value:e},{label:"MB",value:t},{label:"GB",value:n},{label:"TB",value:a},{label:"PB",value:r}];return s},formatBytes2(e,t){let n={num:0,unitLabel:"Bytes",unitValue:0,format(){return`${n.num} ${n.unitLabel}`}};if(!e)return n;let a=e,r=0;for(;a>=1024;r++)a/=1024;let s=t+1||3;return n.num=parseFloat(a).toFixed(s),n.unitLabel=this.bytesUnits()[r-1].label,n.unitValue=this.bytesUnits()[r-1].value,Object.assign({},n)}};t["a"]=s},9225:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var a=n("8bbf"),r=n.n(a),s=n("a925");r.a.use(s["a"]);const o="zpan-locale",i=n("49f8");function l(){const e={};return i.keys().forEach(t=>{const n=t.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){const a=n[1];e[a]=i(t)}}),e}const c=new s["a"]({locale:"en",fallbackLocale:"en",messages:l()}),u=e=>{let t=localStorage.getItem(o);e?(t=e,localStorage.setItem(o,t)):t||(t=navigator.language),r.a.config.locale=t,c.locale=t};u(),t["a"]=c},a22d:function(e,t,n){"use strict";n("54c7")},a604:function(e,t,n){"use strict";n("d57f")},ac82:function(e,t,n){"use strict";n("338e")},c0d6:function(e,t,n){"use strict";var a=n("8bbf"),r=n.n(a),s=n("5880"),o=n.n(s);r.a.use(o.a),t["a"]=new o.a.Store({state:{storages:[],cs:{}},mutations:{storages(e,t){e.storages=t},cs(e,t){e.cs=t}},actions:{}})},c32d:function(e,t){e.exports=moment},d57f:function(e,t,n){},edd4:function(e){e.exports=JSON.parse('{"click-copy-link":"Click copy link","copy-link":"Copy Link","create-folder":"New Folder","day":"Days","op":{"close":"Close","confirm":"Confirm","cancel":"Cancel","enable":"Enable","disable":"Disable","rename":"Rename","delete":"Delete","batch-delete":"Batch Delete"},"msg":{"success":"Success","failed":"Failed","batch-delete-success":"Batch deleted!","create-success":"Created!","delete-success":"Deleted!","move-success":"Moved!","copy-success":"Copied!","copy-failed":"Copy failed","rename-success":"Renamed!","save-success":"Saved!","clean-success":"Cleaned!","recovery-success":"Recoveried!"},"dialog":{"moveto-title":"MoveTo","outlink-title":"Outlink","share-drawcode":"Draw Code","share-drawcode-switch":"Protect","share-expire-time":"Expire Time","share-link":"Link Address","share-title":"Share Link","upload-click":"click to upload","upload-tips":"Drag the file here, or","upload-title":"Upload Queue"},"disk":{"delete":"Delete","download":"Download","folder":"New Folder","upload":"Upload"},"ft":{"breadcrumb":"All files"},"ftb":{"move":"MoveTo","remove":"Remove","rename":"Rename"},"fth":{"name":"Name","size":"Size","updated":"LastUpdated"},"leftnav":{"audio":"Audios","doc":"Documents","files":"All Files","image":"Pictures","share":"Shares","recyclebin":"Recycle Bin","storage":"Storage","video":"Videos"},"share":{"auto-download-tips":"Your file has started downloading, if it has not started, please click here to try again","created":"ShareTime","drawcode":"DrawCode","drawcode-placeholder":"Please input your draw code","drawfile":"Draw","expired":"ExpireTime","link":"ShareLink","name":"Name"},"recyclebin":{"recovery":"Recover file(s)?","delete":"Delete forever?","clean":"Empty the recycle bin"},"tips":{"batch-delete":"This operation will permanently delete the selected files, do you want to continue?","create-folder":"Please input folder name","remove":"This operation will permanently delete the file, do you want to continue?","rename":"Please input newly name","recyclebin":"Tip: The recycle bin also occupies the network disk space, please clean it up in time~","recovery":"Are you sure you want to recover the selected file(s)?","delete":"Deleted files cannot be recovered, are you sure you want to permanently delete the selected file(s)?","clean":"Are you sure to empty the Recycle Bin?","deleting":"Deleting..."},"topbar":{"netdisk":"Netdisk","imghosting":"Image Hosting","search":"Searching...","profile":"Profile","settings":"Settings","s-platform":"Manage Panel","signout":"Sign out"},"title":{"disk":"My Files","share":"My Shares","recyclebin":"Recycle Bin","picture":"Image Hosting","storage-quota":"Storage Quota"},"year":"Years","admin":{"search-placeholder":"Input the email...","storage-search-placeholder":"Input the storage...","btn-user-add":"Add User","btn-quota-update":"Change Quota","btn-storage-add":"Create Storage","btn-edit":"Edit","label-nickname":"Nickname","label-email":"Email","label-role":"Role","label-status":"Status","label-storage":"Quota","label-operation":"Operation","label-quota":"Storage Quota","label-quota-change":"Quota Change","label-password-reset":"Password Reset","label-storage-manager":"Storage","label-name":"Name","label-title":"Label","label-intro":"Intro","label-bucket":"Bucket","label-endpoint":"Endpoint","label-region":"Region","label-custom_host":"CustomHost","label-access_key":"AccessKey","label-secret_key":"SecretKey"},"cloudplatform":{"COS":"TencentCloud","KODO":"QiniuCloud","MINIO":"Self-hosted","NOS":"Netease","OBS":"HuaweiCloud","OSS":"AliyunCloud","S3":"AWSCloud","US3":"UColud","USS":"UPYun"}}')}});